--------------------------------------------------------
--  DDL for Table COURSE
--------------------------------------------------------
CREATE TABLE COURSE
(
  ID NUMBER GENERATED BY DEFAULT AS IDENTITY NOT NULL 
, COURSENAME VARCHAR2(255) 
, DESCRIPTION VARCHAR2(255) 
, IMAGEPATH VARCHAR2(255) 
, STATUS VARCHAR2(120) 
, CONSTRAINT COURSE_PK PRIMARY KEY (ID) ENABLE 
);

--------------------------------------------------------
--  DDL for Table Exam
--------------------------------------------------------
CREATE TABLE EXAM 
(
  ID NUMBER GENERATED BY DEFAULT AS IDENTITY NOT NULL 
, TITEL VARCHAR2(255) NOT NULL 
, DESCRIPTION VARCHAR2(255) 
, SUCCESSMARK FLOAT 
, PASSCODE VARCHAR2(150) NOT NULL 
, COST FLOAT 
, EXAMLEVEL VARCHAR2(200) 
, STARTDATE DATE 
, ENDDATE DATE 
, STATUS VARCHAR2(200) 
, CREATEDAT DATE 
, COURSEID NUMBER 
, CONSTRAINT EXAM_PK PRIMARY KEY (ID) ENABLE 
);

CREATE UNIQUE INDEX EXAM_PASSCODE ON EXAM (PASSCODE);

CREATE UNIQUE INDEX EXAM_TITLE ON EXAM (TITEL);

ALTER TABLE EXAM
ADD CONSTRAINT EXAM_FK1 FOREIGN KEY (COURSEID) REFERENCES COURSE(ID) ON DELETE SET NULL ENABLE;

--------------------------------------------------------
--  DDL for Table QUESTION
--------------------------------------------------------
CREATE TABLE QUESTION 
(
  ID NUMBER GENERATED BY DEFAULT AS IDENTITY NOT NULL 
, QUESTIONTEXT VARCHAR2(255) 
, OPTION1 VARCHAR2(350) 
, OPTION2 VARCHAR2(350) 
, OPTION3 VARCHAR2(350) 
, OPTION4 VARCHAR2(350) 
, ANSWER VARCHAR2(350) 
, SCORE FLOAT 
, STATUS VARCHAR2(150) 
, EXAMID NUMBER 
, CONSTRAINT QUESTION_PK PRIMARY KEY (ID) ENABLE 
);

ALTER TABLE QUESTION
ADD CONSTRAINT QUESTION_FK1 FOREIGN KEY(EXAMID) REFERENCES EXAM (ID) ON DELETE SET NULL ENABLE;

--------------------------------------------------------
--  DDL for Table ACCOUNT
--------------------------------------------------------
CREATE TABLE ACCOUNT 
(
  ID NUMBER GENERATED BY DEFAULT AS IDENTITY NOT NULL 
, ROLENAME VARCHAR2(250) 
, USERNAME VARCHAR2(255) 
, FULLNAME VARCHAR2(255) 
, EMAIL VARCHAR2(255) 
, PASSWORD VARCHAR2(255) 
, GENDER VARCHAR2(255) 
, BOD DATE 
, PHONENUMBER VARCHAR2(255) 
, ADDRESS VARCHAR2(255) 
, IMAGEPATH VARCHAR2(255) 
, CONSTRAINT ACCOUNT_PK PRIMARY KEY (ID) ENABLE 
);

CREATE UNIQUE INDEX ACCOUNT_EMAIL ON ACCOUNT (EMAIL);

CREATE UNIQUE INDEX ACCOUNT_USERNAME ON ACCOUNT (USERNAME);

--------------------------------------------------------
--  DDL for Table RESULT
--------------------------------------------------------
CREATE TABLE RESULT 
(
  ID NUMBER GENERATED BY DEFAULT AS IDENTITY NOT NULL 
, USERANSWER VARCHAR2(350) 
, QUESTIONID NUMBER 
, ACCOUNTID NUMBER 
, CONSTRAINT RESULT_PK PRIMARY KEY (ID) ENABLE 
);

ALTER TABLE RESULT
ADD CONSTRAINT RESULT_FK1 FOREIGN KEY (QUESTIONID) REFERENCES QUESTION (ID) ON DELETE SET NULL ENABLE;

ALTER TABLE RESULT
ADD CONSTRAINT RESULT_FK2 FOREIGN KEY (ACCOUNTID) REFERENCES ACCOUNT (ID) ON DELETE SET NULL ENABLE;

--------------------------------------------------------
--  DDL for Table INVOICE
--------------------------------------------------------
CREATE TABLE INVOICE 
(
  ID NUMBER GENERATED BY DEFAULT AS IDENTITY NOT NULL 
, DATETIME DATE 
, EXAMID NUMBER 
, ACCOUNTID NUMBER 
, CONSTRAINT INVOICE_PK PRIMARY KEY (ID) ENABLE 
);

ALTER TABLE INVOICE
ADD CONSTRAINT INVOICE_FK1 FOREIGN KEY (EXAMID) REFERENCES EXAM (ID) ON DELETE SET NULL ENABLE;

ALTER TABLE INVOICE
ADD CONSTRAINT INVOICE_FK2 FOREIGN KEY (ACCOUNTID) REFERENCES ACCOUNT (ID) ON DELETE SET NULL ENABLE;

--------------------------------------------------------
--  DDL for Table CERTIFICATE
--------------------------------------------------------
CREATE TABLE CERTIFICATE 
(
  ID NUMBER GENERATED BY DEFAULT AS IDENTITY NOT NULL 
, DATETIME DATE 
, EXAMID NUMBER 
, ACCOUNTID NUMBER 
, CONSTRAINT CERTIFICATE_PK PRIMARY KEY (ID) ENABLE 
);

ALTER TABLE CERTIFICATE
ADD CONSTRAINT CERTIFICATE_FK1 FOREIGN KEY (EXAMID) REFERENCES EXAM (ID) ON DELETE SET NULL ENABLE;

ALTER TABLE CERTIFICATE
ADD CONSTRAINT CERTIFICATE_FK2 FOREIGN KEY (ACCOUNTID) REFERENCES ACCOUNT (ID) ON DELETE SET NULL ENABLE;

--------------------------------------------------------
--  DDL for Table CREDITCARD
--------------------------------------------------------
CREATE TABLE CREDITCARD 
(
  ID NUMBER GENERATED BY DEFAULT AS IDENTITY NOT NULL 
, CARDNUMBER VARCHAR2(250) 
, BALANCE FLOAT 
, ACCOUNTID NUMBER 
, CONSTRAINT CREDITCARD_PK PRIMARY KEY (ID) ENABLE 
);

ALTER TABLE CREDITCARD
ADD CONSTRAINT CREDITCARD_FK1 FOREIGN KEY (ACCOUNTID) REFERENCES ACCOUNT (ID) ON DELETE SET NULL ENABLE;

--------------------------------------------------------
--  DDL for Table SCORE
--------------------------------------------------------
CREATE TABLE SCORE 
(
  ID NUMBER GENERATED BY DEFAULT AS IDENTITY NOT NULL 
, USERGRADE FLOAT 
, EXAMID NUMBER 
, ACCOUNTID NUMBER 
, CONSTRAINT SCORE_PK PRIMARY KEY (ID) ENABLE 
);

ALTER TABLE SCORE
ADD CONSTRAINT SCORE_FK1 FOREIGN KEY (EXAMID) REFERENCES EXAM (ID) ON DELETE SET NULL ENABLE;

ALTER TABLE SCORE
ADD CONSTRAINT SCORE_FK2 FOREIGN KEY (ACCOUNTID) REFERENCES ACCOUNT (ID) ON DELETE SET NULL ENABLE;
